# Iris test module

## Overview

This is a test module, to demo the DVC workflow.

The file `test_iris.py` loads the `test_iris` dataset by Fisher (1936) and saves the number of observations for usage in latex.

The `explore_iris.ipynb` jupyter notebook contains some ephemeral analyses. This file would usually be stored in the `issue/` subdirectory.

## Steps used to create this module

1. Save the raw data related to the `test_iris` module in a folder called `data/raw/test_iris/`. Commit the `README.md` documentation within that folder directly to the git repo. Add the `iris.csv` dataset via DVC with `dvc add`.
2. Create symlinks to the required input files of the raw data in `data/input/test_iris`. Here that would just be a symlink to `data/raw/test_iris/iris.csv` which can be created by running `ln -s ../../raw/test_iris/iris.csv` from the `data/input/test_iris/` directory.
3. Create the folder `analysis/test_iris` and, optionally, make a notebook for ephemeral analyses. Add the notebook to DVC and create a jupytext representation, by running `bin/add-notebook.sh analysis/test_iris/explore_iris.ipynb` from the the root of the project directory. This file would usually be stored in the `issue/` subdirectory.
4. Save the production code related to the `test_iris` module in the directory `analysis/test_iris`. Create an empty `__init__.py` file in that same folder to turn the folder into a python module. Save the actual code in `test_iris.py`.
5. Store the output data generated by the code in `data/output/test_iris` and any final results to be included in the paper in `data/release/`.
6. Add a stage to the `dvc.yaml` file, declaring the run command, inputs (including outputs from other stages) and outputs:
```yaml
stages:
  test_iris:
    cmd: python -m analysis.test_iris.test_iris  # Execute the code as a python module from the project root directory.
    deps: # What files and directories the run command depends on.
      - analysis/test_iris/test_iris.py
      - data/input/test_iris/
    # There is no output data used by other modules.
    # The autofilling values are already tracked by Git.
    # Otherwise, we would add:
    # outs:
    #   - data/output/test_iris/
    #   - data/release/test_iris.tex
```
7. Run the analysis with `dvc repro test_iris`.
